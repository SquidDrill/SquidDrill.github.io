import zipfile
from pathlib import Path

# Prepare the folder structure
site_dir = Path("/mnt/data/squiddrill_site")
site_dir.mkdir(exist_ok=True)

# Paths for assets
html_path = site_dir / "index.html"
css_path = site_dir / "styles.css"
js_path = site_dir / "script.js"
music_path = site_dir / "bg-music.mp3"
avatar_path = site_dir / "avatar.png"

# Sample ambient audio placeholder (you can replace with real one in your repo)
# We'll not add actual audio here due to space, just filename reference

# HTML content
html_content = """
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SquidDrill</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="fog"></div>
  <div class="container">
    <img src="avatar.png" alt="avatar" class="avatar">
    <h1>SquidDrill</h1>
    <p class="tagline">currently buffering existence</p>
    <nav>
      <a href="#" onclick="showPage('about')">about</a> |
      <a href="#" onclick="showPage('socials')">socials</a> |
      <a href="#" onclick="showPage('posts')">posts</a>
    </nav>
  </div>

  <div id="about" class="page">
    <p>I think, therefore I log off.<br>Probably overthinking something right now.</p>
    <a href="#" onclick="hidePages()">← back</a>
  </div>

  <div id="posts" class="page">
    <p>Nothing here yet... but something always brews under the surface.</p>
    <a href="#" onclick="hidePages()">← back</a>
  </div>

  <div id="socials" class="page modal">
    <p><strong>GitHub:</strong> <span class="copyable" onclick="copyText('SquidDrill')">SquidDrill</span><br>
       <strong>Discord:</strong> <span class="copyable" onclick="copyText('squiddrilll')">squiddrilll</span></p>
    <a href="#" onclick="hidePages()">← back</a>
  </div>

  <audio id="bg-music" loop autoplay muted>
    <source src="bg-music.mp3" type="audio/mp3">
    Your browser does not support the audio tag.
  </audio>
  <button class="music-btn" onclick="toggleMusic()">♫ music</button>

  <script src="script.js"></script>
</body>
</html>
"""

# CSS content
css_content = """
body {
  margin: 0;
  font-family: monospace;
  background-color: #0d0d0d;
  color: #cccccc;
  overflow-x: hidden;
}

.container {
  text-align: center;
  padding-top: 60px;
}

.avatar {
  width: 120px;
  height: 120px;
  object-fit: cover;
  border-radius: 50%;
  filter: grayscale(100%) blur(0.2px);
  box-shadow: 0 0 20px rgba(255,255,255,0.2);
}

.tagline {
  margin: 0.5em 0 1.5em;
  color: #888;
}

nav a {
  color: #aaa;
  text-decoration: none;
  margin: 0 10px;
}

.page {
  display: none;
  text-align: center;
  margin-top: 30px;
}

.modal {
  background: rgba(0, 0, 0, 0.8);
  border: 1px solid #444;
  padding: 20px;
  width: 70%;
  margin: 40px auto;
  border-radius: 10px;
}

.copyable {
  color: #9cf;
  cursor: pointer;
}

.copyable:hover {
  text-decoration: underline;
}

.fog {
  position: fixed;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle, rgba(255,255,255,0.05) 1%, transparent 100%);
  background-size: 40px 40px;
  z-index: -1;
  animation: fogmove 15s infinite linear;
}

@keyframes fogmove {
  from { background-position: 0 0; }
  to { background-position: 100% 100%; }
}

.music-btn {
  position: fixed;
  bottom: 10px;
  right: 10px;
  padding: 6px 12px;
  background: transparent;
  border: 1px solid #999;
  color: #ccc;
  cursor: pointer;
  font-family: monospace;
}
"""

# JS content
js_content = """
function showPage(id) {
  hidePages();
  document.getElementById(id).style.display = 'block';
}

function hidePages() {
  const pages = document.querySelectorAll('.page');
  pages.forEach(p => p.style.display = 'none');
}

function toggleMusic() {
  const audio = document.getElementById('bg-music');
  audio.muted = !audio.muted;
}

function copyText(text) {
  navigator.clipboard.writeText(text);
  alert(`Copied: ${text}`);
}
"""

# Write files
html_path.write_text(html_content)
css_path.write_text(css_content)
js_path.write_text(js_content)

# Use original avatar from user
original_avatar = Path("/mnt/data/e0347b46-e74b-43ea-86a0-16df20d9bca7.png")
avatar_path.write_bytes(original_avatar.read_bytes())

# Create a dummy MP3 file reference
music_path.write_bytes(b"" if not music_path.exists() else music_path.read_bytes())

# Zip everything
zip_path = "/mnt/data/squiddrill_site.zip"
with zipfile.ZipFile(zip_path, "w") as zipf:
    for file in site_dir.iterdir():
        zipf.write(file, arcname=file.name)

zip_path
